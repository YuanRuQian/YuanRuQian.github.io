<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> R programming : Covid-19 data visualization Â· Lydia Yuan's Blog</title><meta name="description" content="R programming : Covid-19 data visualization - Lydia Yuan"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Lydia Yuan's Blog"><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="Lydia Yuan's Blog" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">TAGS</a></li><li class="nav-list-item"><a href="https://github.com/YuanRuQian" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="mailto:lydiayuan99@protonmail.com" target="_self" class="nav-list-link">E-MAIL</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">R programming : Covid-19 data visualization</h1><div class="post-info">Apr 18, 2020</div><div class="post-content"><blockquote>
<p>I use <code>text()</code> to label numbers in graphs and it sucks ... I try to battle with it manully adjusting the parameters and it is still ugly ... if you know any other way PLEASE DO COMMENT !!! Thx !!! ğŸ™</p>
</blockquote>
<p>Here is the raw data :</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&gt; china</span><br><span class="line">            æ—¥æœŸ æ–°å¢ç¡®è¯Šç—…ä¾‹ æ–°å¢æ­»äº¡ç—…ä¾‹ æ–°å¢æ²»æ„ˆå‡ºé™¢ç—…ä¾‹ æ–°å¢ç–‘ä¼¼ç—…ä¾‹</span><br><span class="line"><span class="number">1</span>  <span class="number">2020</span>å¹´<span class="number">1</span>æœˆ<span class="number">29</span>æ—¥         <span class="number">1737</span>           <span class="number">38</span>               <span class="number">21</span>         <span class="number">4148</span></span><br><span class="line"><span class="number">2</span>  <span class="number">2020</span>å¹´<span class="number">1</span>æœˆ<span class="number">30</span>æ—¥         <span class="number">1982</span>           <span class="number">43</span>               <span class="number">47</span>         <span class="number">4812</span></span><br><span class="line"><span class="number">3</span>  <span class="number">2020</span>å¹´<span class="number">1</span>æœˆ<span class="number">31</span>æ—¥         <span class="number">2102</span>           <span class="number">46</span>               <span class="number">73</span>         <span class="number">5019</span></span><br><span class="line"><span class="number">4</span>   <span class="number">2020</span>å¹´<span class="number">2</span>æœˆ<span class="number">1</span>æ—¥         <span class="number">2590</span>           <span class="number">46</span>               <span class="number">85</span>         <span class="number">4562</span></span><br><span class="line"><span class="number">5</span>   <span class="number">2020</span>å¹´<span class="number">2</span>æœˆ<span class="number">2</span>æ—¥         <span class="number">2829</span>           <span class="number">57</span>              <span class="number">147</span>         <span class="number">5173</span></span><br><span class="line"><span class="number">6</span>   <span class="number">2020</span>å¹´<span class="number">2</span>æœˆ<span class="number">3</span>æ—¥         <span class="number">3235</span>           <span class="number">64</span>              <span class="number">157</span>         <span class="number">5072</span></span><br><span class="line"><span class="number">7</span>   <span class="number">2020</span>å¹´<span class="number">2</span>æœˆ<span class="number">4</span>æ—¥         <span class="number">3887</span>           <span class="number">65</span>              <span class="number">262</span>         <span class="number">3971</span></span><br><span class="line"><span class="number">8</span>   <span class="number">2020</span>å¹´<span class="number">2</span>æœˆ<span class="number">5</span>æ—¥         <span class="number">3694</span>           <span class="number">73</span>              <span class="number">261</span>         <span class="number">5328</span></span><br><span class="line"><span class="number">9</span>   <span class="number">2020</span>å¹´<span class="number">2</span>æœˆ<span class="number">6</span>æ—¥         <span class="number">3143</span>           <span class="number">73</span>              <span class="number">387</span>         <span class="number">4833</span></span><br><span class="line"><span class="number">10</span>  <span class="number">2020</span>å¹´<span class="number">2</span>æœˆ<span class="number">7</span>æ—¥         <span class="number">3399</span>           <span class="number">86</span>              <span class="number">510</span>         <span class="number">4214</span></span><br><span class="line"><span class="number">11</span>  <span class="number">2020</span>å¹´<span class="number">2</span>æœˆ<span class="number">8</span>æ—¥         <span class="number">2656</span>           <span class="number">89</span>              <span class="number">600</span>         <span class="number">3916</span></span><br><span class="line"><span class="number">12</span>  <span class="number">2020</span>å¹´<span class="number">2</span>æœˆ<span class="number">9</span>æ—¥         <span class="number">3062</span>           <span class="number">97</span>              <span class="number">632</span>         <span class="number">4008</span></span><br><span class="line"><span class="number">13</span> <span class="number">2020</span>å¹´<span class="number">2</span>æœˆ<span class="number">10</span>æ—¥         <span class="number">2478</span>          <span class="number">108</span>              <span class="number">716</span>         <span class="number">3536</span></span><br><span class="line"><span class="number">14</span> <span class="number">2020</span>å¹´<span class="number">2</span>æœˆ<span class="number">11</span>æ—¥         <span class="number">2015</span>           <span class="number">97</span>              <span class="number">744</span>         <span class="number">3342</span></span><br><span class="line"><span class="number">15</span> <span class="number">2020</span>å¹´<span class="number">2</span>æœˆ<span class="number">12</span>æ—¥        <span class="number">15152</span>          <span class="number">254</span>             <span class="number">1171</span>         <span class="number">2807</span></span><br><span class="line"><span class="number">16</span> <span class="number">2020</span>å¹´<span class="number">2</span>æœˆ<span class="number">13</span>æ—¥         <span class="number">5090</span>          <span class="number">121</span>             <span class="number">1081</span>         <span class="number">2450</span></span><br><span class="line"><span class="number">17</span> <span class="number">2020</span>å¹´<span class="number">2</span>æœˆ<span class="number">14</span>æ—¥         <span class="number">2641</span>          <span class="number">143</span>             <span class="number">1373</span>         <span class="number">2277</span></span><br><span class="line"><span class="number">18</span> <span class="number">2020</span>å¹´<span class="number">2</span>æœˆ<span class="number">15</span>æ—¥         <span class="number">2009</span>          <span class="number">142</span>             <span class="number">1323</span>         <span class="number">1918</span></span><br><span class="line"><span class="number">19</span> <span class="number">2020</span>å¹´<span class="number">2</span>æœˆ<span class="number">16</span>æ—¥         <span class="number">2048</span>          <span class="number">105</span>             <span class="number">1425</span>         <span class="number">1563</span></span><br><span class="line"><span class="number">20</span> <span class="number">2020</span>å¹´<span class="number">2</span>æœˆ<span class="number">17</span>æ—¥         <span class="number">1886</span>           <span class="number">98</span>             <span class="number">1701</span>         <span class="number">1432</span></span><br><span class="line"><span class="number">21</span> <span class="number">2020</span>å¹´<span class="number">2</span>æœˆ<span class="number">18</span>æ—¥         <span class="number">1749</span>          <span class="number">136</span>             <span class="number">1824</span>         <span class="number">1185</span></span><br><span class="line"><span class="number">22</span> <span class="number">2020</span>å¹´<span class="number">2</span>æœˆ<span class="number">19</span>æ—¥          <span class="number">394</span>          <span class="number">114</span>             <span class="number">1779</span>         <span class="number">1277</span></span><br><span class="line"><span class="number">23</span> <span class="number">2020</span>å¹´<span class="number">2</span>æœˆ<span class="number">20</span>æ—¥          <span class="number">889</span>          <span class="number">118</span>             <span class="number">2109</span>         <span class="number">1614</span></span><br><span class="line">&gt; usa</span><br><span class="line">            åœ°åŒº ç´¯è®¡ç¡®è¯Š ç´¯è®¡æ­»äº¡</span><br><span class="line"><span class="number">1</span>       New York   <span class="number">223691</span>    <span class="number">12248</span></span><br><span class="line"><span class="number">2</span>     New Jersey    <span class="number">75317</span>     <span class="number">3518</span></span><br><span class="line"><span class="number">3</span>  Massachusetts    <span class="number">32181</span>     <span class="number">1245</span></span><br><span class="line"><span class="number">4</span>       Michigan    <span class="number">29263</span>     <span class="number">2093</span></span><br><span class="line"><span class="number">5</span>     California    <span class="number">28036</span>      <span class="number">965</span></span><br><span class="line"><span class="number">6</span>   Pennsylvania    <span class="number">27735</span>      <span class="number">707</span></span><br><span class="line"><span class="number">7</span>       Illinois    <span class="number">25734</span>     <span class="number">1072</span></span><br><span class="line"><span class="number">8</span>        Florida    <span class="number">23340</span>      <span class="number">668</span></span><br><span class="line"><span class="number">9</span>      Louisiana    <span class="number">22532</span>     <span class="number">1156</span></span><br><span class="line"><span class="number">10</span>         Texas    <span class="number">17216</span>      <span class="number">424</span></span><br></pre></td></tr></table></figure>
<p>Dealing with the Chinese date data :</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; as.Date(china$æ—¥æœŸ, format = <span class="string">"%Yå¹´%mæœˆ%dæ—¥"</span>)</span><br><span class="line"> [<span class="number">1</span>] <span class="string">"2020-01-29"</span> <span class="string">"2020-01-30"</span> <span class="string">"2020-01-31"</span> <span class="string">"2020-02-01"</span> <span class="string">"2020-02-02"</span> <span class="string">"2020-02-03"</span></span><br><span class="line"> [<span class="number">7</span>] <span class="string">"2020-02-04"</span> <span class="string">"2020-02-05"</span> <span class="string">"2020-02-06"</span> <span class="string">"2020-02-07"</span> <span class="string">"2020-02-08"</span> <span class="string">"2020-02-09"</span></span><br><span class="line">[<span class="number">13</span>] <span class="string">"2020-02-10"</span> <span class="string">"2020-02-11"</span> <span class="string">"2020-02-12"</span> <span class="string">"2020-02-13"</span> <span class="string">"2020-02-14"</span> <span class="string">"2020-02-15"</span></span><br><span class="line">[<span class="number">19</span>] <span class="string">"2020-02-16"</span> <span class="string">"2020-02-17"</span> <span class="string">"2020-02-18"</span> <span class="string">"2020-02-19"</span> <span class="string">"2020-02-20"</span></span><br></pre></td></tr></table></figure>
<p>Bummer ! Chinese characters cannot be displayed in the graph !</p>
<p>As a OS X user, I put a Chinese-frendly font in the system font folder then load into the working environment .</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt; font_files()</span><br><span class="line">            path                       file                    family    face</span><br><span class="line"><span class="number">1</span> /Library/Fonts          Arial Unicode.ttf          Arial Unicode MS Regular</span><br><span class="line"><span class="number">2</span> /Library/Fonts  TaipeiSansTCBeta-Bold.ttf       Taipei Sans TC Beta    Bold</span><br><span class="line"><span class="number">3</span> /Library/Fonts TaipeiSansTCBeta-Light.ttf Taipei Sans TC Beta Light Regular</span><br><span class="line"><span class="number">4</span> /Library/Fonts       TaipeiSansTCBeta.ttf       Taipei Sans TC Beta Regular</span><br><span class="line">        version                  ps_name</span><br><span class="line"><span class="number">1</span> Version <span class="number">1.</span>01x           ArialUnicodeMS</span><br><span class="line"><span class="number">2</span> Version <span class="number">1.000</span>    TaipeiSansTCBeta-Bold</span><br><span class="line"><span class="number">3</span> Version <span class="number">1.000</span>   TaipeiSansTCBeta-Light</span><br><span class="line"><span class="number">4</span> Version <span class="number">1.000</span> TaipeiSansTCBeta-Regular</span><br><span class="line">&gt; par(family=<span class="string">'Taipei Sans TC Beta'</span>)</span><br></pre></td></tr></table></figure>
<p>Start to draw the first graph :</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; plot(china$æ–°å¢ç¡®è¯Šç—…ä¾‹~as.Date(china$æ—¥æœŸ,<span class="string">"%Yå¹´%mæœˆ%dæ—¥"</span>),type=<span class="string">'b'</span>,col=<span class="string">'#f94f5b'</span>,pch=<span class="number">2</span>,xlab=<span class="string">'æ—¥æœŸ'</span>,ylab=<span class="string">'ç—…ä¾‹æ•°ç›®'</span>,main=<span class="string">'å›½å†…ç–«æƒ…æ•°æ®'</span>)</span><br><span class="line">&gt; points(as.Date(china$æ—¥æœŸ,<span class="string">"%Yå¹´%mæœˆ%dæ—¥"</span>),china$æ–°å¢æ­»äº¡ç—…ä¾‹,col=<span class="string">'#df9f9f'</span>,pch=<span class="number">4</span>,type = <span class="string">'b'</span>)</span><br><span class="line">&gt; points(as.Date(china$æ—¥æœŸ,<span class="string">"%Yå¹´%mæœˆ%dæ—¥"</span>),china$æ–°å¢æ²»æ„ˆå‡ºé™¢ç—…ä¾‹,col=<span class="string">'#9a3e3e'</span>,pch=<span class="number">6</span>,type=<span class="string">'b'</span>)</span><br><span class="line">&gt; points(as.Date(china$æ—¥æœŸ,<span class="string">"%Yå¹´%mæœˆ%dæ—¥"</span>),china$æ–°å¢ç–‘ä¼¼ç—…ä¾‹,col=<span class="string">'#ce7676'</span>,pch=<span class="number">8</span>,type=<span class="string">'b'</span>)</span><br><span class="line">&gt; legend(<span class="string">'topright'</span>,c(<span class="string">'æ–°å¢ç¡®è¯Šç—…ä¾‹'</span>,<span class="string">'æ–°å¢æ­»äº¡ç—…ä¾‹'</span>,<span class="string">'æ–°å¢æ²»æ„ˆå‡ºé™¢ç—…ä¾‹'</span>,<span class="string">'æ–°å¢ç–‘ä¼¼ç—…ä¾‹'</span>),col=c(<span class="string">'#f94f5b'</span>,<span class="string">'#df9f9f'</span>,<span class="string">'#9a3e3e'</span>,<span class="string">'#ce7676'</span>),pch=c(<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>))</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/lY0h2We.png" /></p>
<p>Now draw two pie charts with fancy percent legend :</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt; percent&lt;-round(<span class="number">100</span>*usa$ç´¯è®¡ç¡®è¯Š/sum(usa$ç´¯è®¡ç¡®è¯Š),<span class="number">2</span>) </span><br><span class="line">&gt; percent &lt;-paste(percent, <span class="string">"%"</span>, sep = <span class="string">""</span>) </span><br><span class="line">&gt; percent &lt;-paste(usa$åœ°åŒº,<span class="string">' '</span>,percent, sep = <span class="string">""</span>) </span><br><span class="line">&gt; percent</span><br><span class="line"> [<span class="number">1</span>] <span class="string">"New York 44.29%"</span>     <span class="string">"New Jersey 14.91%"</span>   <span class="string">"Massachusetts 6.37%"</span></span><br><span class="line"> [<span class="number">4</span>] <span class="string">"Michigan 5.79%"</span>      <span class="string">"California 5.55%"</span>    <span class="string">"Pennsylvania 5.49%"</span> </span><br><span class="line"> [<span class="number">7</span>] <span class="string">"Illinois 5.1%"</span>       <span class="string">"Florida 4.62%"</span>       <span class="string">"Louisiana 4.46%"</span>    </span><br><span class="line">[<span class="number">10</span>] <span class="string">"Texas 3.41%"</span>  </span><br><span class="line">&gt; pie(usa$ç´¯è®¡ç¡®è¯Š,labels = percent,col = rainbow(length(usa$åœ°åŒº)))</span><br><span class="line">&gt; title(<span class="string">'ç¾å›½å„å¤§å·ç´¯è®¡ç¡®è¯Šæ•°ç›®'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/PbvZzGd.png" /></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; percent&lt;-round(<span class="number">100</span>*usa$ç´¯è®¡æ­»äº¡/sum(usa$ç´¯è®¡æ­»äº¡),<span class="number">2</span>) </span><br><span class="line">&gt; percent &lt;-paste(percent, <span class="string">"%"</span>, sep = <span class="string">""</span>) </span><br><span class="line">&gt; percent &lt;-paste(usa$åœ°åŒº,<span class="string">' '</span>,percent, sep = <span class="string">""</span>) </span><br><span class="line">&gt; percent</span><br><span class="line"> [<span class="number">1</span>] <span class="string">"New York 50.83%"</span>     <span class="string">"New Jersey 14.6%"</span>    <span class="string">"Massachusetts 5.17%"</span></span><br><span class="line"> [<span class="number">4</span>] <span class="string">"Michigan 8.69%"</span>      <span class="string">"California 4%"</span>       <span class="string">"Pennsylvania 2.93%"</span> </span><br><span class="line"> [<span class="number">7</span>] <span class="string">"Illinois 4.45%"</span>      <span class="string">"Florida 2.77%"</span>       <span class="string">"Louisiana 4.8%"</span>     </span><br><span class="line">[<span class="number">10</span>] <span class="string">"Texas 1.76%"</span></span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/I02uekp.png" /></p>
<p>Now bar plot :</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; us &lt;- t(usa[,c(<span class="number">2</span>:<span class="number">3</span>)])</span><br><span class="line">&gt; us</span><br><span class="line">           [,<span class="number">1</span>]  [,<span class="number">2</span>]  [,<span class="number">3</span>]  [,<span class="number">4</span>]  [,<span class="number">5</span>]  [,<span class="number">6</span>]  [,<span class="number">7</span>]  [,<span class="number">8</span>]  [,<span class="number">9</span>] [,<span class="number">10</span>]</span><br><span class="line">ç´¯è®¡ç¡®è¯Š <span class="number">223691</span> <span class="number">75317</span> <span class="number">32181</span> <span class="number">29263</span> <span class="number">28036</span> <span class="number">27735</span> <span class="number">25734</span> <span class="number">23340</span> <span class="number">22532</span> <span class="number">17216</span></span><br><span class="line">ç´¯è®¡æ­»äº¡  <span class="number">12248</span>  <span class="number">3518</span>  <span class="number">1245</span>  <span class="number">2093</span>   <span class="number">965</span>   <span class="number">707</span>  <span class="number">1072</span>   <span class="number">668</span>  <span class="number">1156</span>   <span class="number">424</span></span><br><span class="line">&gt; barplot(us,beside=<span class="literal">TRUE</span>,names.arg = usa$åœ°åŒº,col=c(<span class="string">'#3b5998'</span>,<span class="string">'#8b9dc3'</span>),legend.text = c(<span class="string">'ç´¯è®¡ç¡®è¯Š'</span>,<span class="string">'ç´¯è®¡æ­»äº¡'</span>),main = <span class="string">'ç¾å›½å„å¤§å·ç´¯è®¡ç¡®è¯Šä¸æ­»äº¡æ•°æ®'</span>,ylim = c(<span class="number">0</span>,<span class="number">250000</span>))</span><br><span class="line">&gt; text(x=c(<span class="number">1</span>:length(usa$åœ°åŒº))*<span class="number">2.75</span>+<span class="number">0.75</span>,y=usa$ç´¯è®¡æ­»äº¡,labels = usa$ç´¯è®¡æ­»äº¡,cex=<span class="number">1</span>,pos=<span class="number">3</span>,col=<span class="string">"#000000"</span>)</span><br><span class="line">&gt; text(x=c(<span class="number">1</span>:length(usa$åœ°åŒº))*<span class="number">2.5</span>,y=usa$ç´¯è®¡ç¡®è¯Š,labels = usa$ç´¯è®¡ç¡®è¯Š,cex=<span class="number">1</span>,pos=<span class="number">3</span>,col=<span class="string">"#000000"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/jmEFEYS.png" /></p>
<p>Now box plot :</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; boxplot(usa$ç´¯è®¡ç¡®è¯Š,usa$ç´¯è®¡æ­»äº¡,col=c(<span class="string">'#ffcc66'</span>),names = c(<span class="string">'ç´¯è®¡ç¡®è¯Š'</span>,<span class="string">'ç´¯è®¡æ­»äº¡'</span>))</span><br><span class="line">&gt; title(<span class="string">'ç¾å›½ç´¯è®¡ç¡®è¯Šä¸ç´¯è®¡æ­»äº¡æ•°æ®'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/f092XC0.png" /></p>
<p>Now dot chart :</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; dotchart(usa[order(usa$ç´¯è®¡ç¡®è¯Š),]$ç´¯è®¡ç¡®è¯Š,labels = usa[order(usa$ç´¯è®¡ç¡®è¯Š),]$åœ°åŒº,main = <span class="string">"ç¾å›½ç´¯è®¡ç¡®è¯Šæƒ…å†µ"</span>,pch=<span class="number">18</span>,col=<span class="string">"#52bf90"</span>,xlab = <span class="string">"æ•°é‡"</span>)</span><br><span class="line">&gt; dotchart(usa[order(usa$ç´¯è®¡æ­»äº¡),]$ç´¯è®¡æ­»äº¡,labels = usa[order(usa$ç´¯è®¡æ­»äº¡),]$åœ°åŒº,main = <span class="string">"ç¾å›½ç´¯è®¡æ­»äº¡æƒ…å†µ"</span>,pch=<span class="number">18</span>,col=<span class="string">"#52bf90"</span>,xlab = <span class="string">"æ•°é‡"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/nO9bov4.png" /></p>
<p><img src="https://i.imgur.com/Cpm2wYC.png" /></p>
<p>Finally ğŸ’…</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; barplot(china$æ–°å¢ç¡®è¯Šç—…ä¾‹~as.Date(china$æ—¥æœŸ,<span class="string">"%Yå¹´%mæœˆ%dæ—¥"</span>),col=<span class="string">'#f94f5b'</span>,xlab=<span class="string">'æ—¥æœŸ'</span>,ylab=<span class="string">'ç—…ä¾‹æ•°ç›®'</span>,main=<span class="string">'å›½å†…æ–°å¢ç¡®è¯Šç–«æƒ…æ•°æ®'</span>)</span><br><span class="line">&gt; text(x=c(<span class="number">1</span>:length(china$æ—¥æœŸ))*<span class="number">1.15</span>,y=china$æ–°å¢ç¡®è¯Šç—…ä¾‹,labels=china$æ–°å¢ç¡®è¯Šç—…ä¾‹,cex=<span class="number">1</span>,pos=<span class="number">3</span>,col=<span class="string">"#000000"</span>)</span><br><span class="line">&gt; barplot(china$æ–°å¢ç¡®è¯Šç—…ä¾‹~as.Date(china$æ—¥æœŸ,<span class="string">"%Yå¹´%mæœˆ%dæ—¥"</span>),col=<span class="string">'#f94f5b'</span>,xlab=<span class="string">'æ—¥æœŸ'</span>,ylab=<span class="string">'ç—…ä¾‹æ•°ç›®'</span>,main=<span class="string">'å›½å†…æ–°å¢ç¡®è¯Šç–«æƒ…æ•°æ®'</span>)</span><br><span class="line">&gt; text(x=c(<span class="number">1</span>:length(china$æ—¥æœŸ))*<span class="number">1.15</span>,y=china$æ–°å¢ç¡®è¯Šç—…ä¾‹,labels=china$æ–°å¢ç¡®è¯Šç—…ä¾‹,cex=<span class="number">1</span>,pos=<span class="number">3</span>,col=<span class="string">"#000000"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/6oXodVh.png" /></p>
<p><img src="https://i.imgur.com/Ft5I1Kr.png" /></p>
<p>Cumulative data :</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt; confirmed &lt;- cumsum(china$æ–°å¢ç¡®è¯Šç—…ä¾‹)</span><br><span class="line">&gt; death &lt;- cumsum(china$æ–°å¢æ­»äº¡ç—…ä¾‹)</span><br><span class="line">&gt; rate &lt;- round(<span class="number">100</span>*death/confirmed,<span class="number">2</span>)</span><br><span class="line">&gt; rate</span><br><span class="line"> [<span class="number">1</span>] <span class="number">2.19</span> <span class="number">2.18</span> <span class="number">2.18</span> <span class="number">2.06</span> <span class="number">2.05</span> <span class="number">2.03</span> <span class="number">1.96</span> <span class="number">1.96</span> <span class="number">2.00</span> <span class="number">2.07</span> <span class="number">2.18</span> <span class="number">2.26</span> <span class="number">2.41</span> <span class="number">2.53</span> <span class="number">2.29</span> <span class="number">2.30</span> <span class="number">2.43</span></span><br><span class="line">[<span class="number">18</span>] <span class="number">2.58</span> <span class="number">2.66</span> <span class="number">2.73</span> <span class="number">2.86</span> <span class="number">3.00</span> <span class="number">3.13</span></span><br><span class="line">&gt; percent</span><br><span class="line"> [<span class="number">1</span>] <span class="string">"2.19 % "</span> <span class="string">"2.18 % "</span> <span class="string">"2.18 % "</span> <span class="string">"2.06 % "</span> <span class="string">"2.05 % "</span> <span class="string">"2.03 % "</span> <span class="string">"1.96 % "</span> <span class="string">"1.96 % "</span></span><br><span class="line"> [<span class="number">9</span>] <span class="string">"2 % "</span>    <span class="string">"2.07 % "</span> <span class="string">"2.18 % "</span> <span class="string">"2.26 % "</span> <span class="string">"2.41 % "</span> <span class="string">"2.53 % "</span> <span class="string">"2.29 % "</span> <span class="string">"2.3 % "</span> </span><br><span class="line">[<span class="number">17</span>] <span class="string">"2.43 % "</span> <span class="string">"2.58 % "</span> <span class="string">"2.66 % "</span> <span class="string">"2.73 % "</span> <span class="string">"2.86 % "</span> <span class="string">"3 % "</span>    <span class="string">"3.13 % "</span></span><br><span class="line">&gt; barplot(rate~as.Date(china$æ—¥æœŸ,<span class="string">"%Yå¹´%mæœˆ%dæ—¥"</span>),col=<span class="string">'#52bf90'</span>,xlab=<span class="string">'æ—¥æœŸ'</span>,ylab=<span class="string">'æ­»äº¡ç‡'</span>,main=<span class="string">'å›½å†…ç–«æƒ…æ­»äº¡ç‡å˜åŒ–æ•°æ®'</span>,ylim=c(<span class="number">0</span>,<span class="number">3.5</span>))</span><br><span class="line">&gt; text(x=c(<span class="number">1</span>:length(china$æ—¥æœŸ))*<span class="number">1.15</span>,y=rate,labels=percent,cex=<span class="number">1</span>,pos=<span class="number">3</span>,col=<span class="string">"#000000"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/20TB9Ve.png" /></p>
</div></article></div></main><footer><div class="paginator"><a href="/2020/04/19/LeetCode-169-Majority-Element/" class="prev">PREV</a><a href="/2020/04/18/LeetCode-230-Kth-Smallest-Element-in-a-BST/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'seansun';
var disqus_identifier = '2020/04/18/R-programming-Covid-19-data-visualization/';
var disqus_title = 'R programming : Covid-19 data visualization';
var disqus_url = 'http://yoursite.com/2020/04/18/R-programming-Covid-19-data-visualization/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//seansun.disqus.com/count.js" async></script><div class="copyright"><p>Â© 2020 <a href="http://yoursite.com">Lydia Yuan</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-164777506-1",'auto');ga('send','pageview');</script></body></html>